import{j as e}from"./index-D3ci393c.js";import{r as t}from"./icons-B7WE3pec.js";import{a as s,H as n,c as a,d as i,e as l,f as r,g as c}from"./index-s5JX4t3x.js";import"./vendor-DI7-unS2.js";const d=()=>{const[d,o]=t.useState([]),[m,x]=t.useState(!0),[u,h]=t.useState(null),[g,j]=t.useState(null),[p,N]=t.useState({title:"",description:""}),[y,b]=t.useState([]),f=t.useCallback((async()=>{try{x(!0);const e=localStorage.getItem("adminContents");if(e)return o(JSON.parse(e)),void x(!1);const t=await s.get("/importants/data.json");o(t.data.contents),localStorage.setItem("adminContents",JSON.stringify(t.data.contents))}catch(e){h(e.message)}finally{x(!1)}}),[]);t.useEffect((()=>{f()}),[f]);const v=e=>{const{name:t,value:s}=e.target;N((e=>({...e,[t]:s})))},C=async e=>{const t=Array.isArray(e),s=t?`Are you sure you want to delete ${e.length} items?`:"Are you sure you want to delete this item?";if(window.confirm(s))try{const s=d.filter((s=>t?!e.includes(s.id):s.id!==e));o(s),localStorage.setItem("adminContents",JSON.stringify(s)),b([])}catch(n){h(n.message)}},S=()=>0===y.length?null:e.jsxs("button",{onClick:()=>C(y),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center gap-2",children:[e.jsx(c,{}),"Delete Selected (",y.length,")"]});return m?e.jsx("div",{className:"admin-container",children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})}):u?e.jsx("div",{className:"admin-container",children:e.jsxs("div",{className:"bg-red-50 border border-red-500 text-red-500 p-4 rounded-lg",children:["Error: ",u,e.jsx("button",{onClick:f,className:"ml-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Retry"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(n,{title:"Admin Dashboard"}),e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"admin-title",children:"Content Management"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{}),e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to reset to default data? All changes will be lost."))try{localStorage.removeItem("adminContents"),f()}catch(e){h(e.message)}},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Reset to Default"})]})]}),e.jsx("div",{className:"admin-select-header",children:e.jsxs("button",{onClick:()=>{y.length===d.length?b([]):b(d.map((e=>e.id)))},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[y.length===d.length?e.jsx(a,{className:"text-blue-500"}):e.jsx(i,{className:"text-gray-400"}),"Select All"]})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={id:d.length+1,...p},t=[...d,e];o(t),localStorage.setItem("adminContents",JSON.stringify(t)),N({title:"",description:""})}catch(t){h(t.message)}},className:"admin-form",children:[e.jsx("input",{type:"text",name:"title",value:p.title,onChange:v,placeholder:"Enter title",className:"admin-input"}),e.jsx("textarea",{name:"description",value:p.description,onChange:v,placeholder:"Enter description",className:"admin-input"}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx(l,{})," ",g?"Update":"Add"," Content"]})]}),e.jsx("div",{className:"admin-content-list",children:d.map((t=>e.jsx("div",{className:"admin-content-item",children:g===t.id?e.jsxs("div",{className:"admin-edit-form",children:[e.jsx("input",{type:"text",name:"title",value:p.title,onChange:v,className:"admin-input"}),e.jsx("textarea",{name:"description",value:p.description,onChange:v,className:"admin-input"}),e.jsx("button",{onClick:()=>(async e=>{try{const t=d.map((t=>t.id===e?{...t,...p}:t));o(t),localStorage.setItem("adminContents",JSON.stringify(t)),j(null),N({title:"",description:""})}catch(t){h(t.message)}})(t.id),className:"admin-button",children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>{return e=t.id,void b((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},className:"mt-1",children:y.includes(t.id)?e.jsx(a,{className:"text-blue-500"}):e.jsx(i,{className:"text-gray-400"})}),e.jsxs("div",{className:"admin-content-text",children:[e.jsx("h3",{children:t.title}),e.jsx("p",{children:t.description})]})]}),e.jsxs("div",{className:"admin-content-actions",children:[e.jsx("button",{onClick:()=>(e=>{j(e.id),N({title:e.title,description:e.description})})(t),className:"admin-action-button edit",children:e.jsx(r,{})}),e.jsx("button",{onClick:()=>C(t.id),className:"admin-action-button delete",children:e.jsx(c,{})})]})]})},t.id)))})]})]})};export{d as default};
