const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-Do9XVDE8.js","assets/vendor-DI7-unS2.js","assets/Display-B7SHzh65.js","assets/icons-B7WE3pec.js","assets/scroll-BV8eipok.js","assets/Display-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{r as e,b as t,a as r,g as n}from"./vendor-DI7-unS2.js";import{r as s,G as i}from"./icons-B7WE3pec.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a,o,l={exports:{}},c={};var u,h=(o||(o=1,l.exports=function(){if(a)return c;a=1;var t=e(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var a,l={},c=null,u=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:u,props:l,_owner:i.current}}return c.Fragment=n,c.jsx=l,c.jsxs=l,c}()),l.exports),d={};var p=function(){if(u)return d;u=1;var e=t();return d.createRoot=e.createRoot,d.hydrateRoot=e.hydrateRoot,d}();const f={},m=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in f)return;f[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise(((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))};var g,v={};!function(){if(g)return v;g=1,Object.defineProperty(v,"__esModule",{value:!0}),v.parse=function(e,t){const r=new i,n=e.length;if(n<2)return r;const s=(null==t?void 0:t.decode)||l;let c=0;do{const t=e.indexOf("=",c);if(-1===t)break;const i=e.indexOf(";",c),l=-1===i?n:i;if(t>l){c=e.lastIndexOf(";",t-1)+1;continue}const u=a(e,c,t),h=o(e,t,u),d=e.slice(u,h);if(void 0===r[d]){let n=a(e,t+1,l),i=o(e,l,n);const c=s(e.slice(n,i));r[d]=c}c=l+1}while(c<n);return r},v.serialize=function(i,a,o){const l=(null==o?void 0:o.encode)||encodeURIComponent;if(!e.test(i))throw new TypeError(`argument name is invalid: ${i}`);const c=l(a);if(!t.test(c))throw new TypeError(`argument val is invalid: ${a}`);let u=i+"="+c;if(!o)return u;if(void 0!==o.maxAge){if(!Number.isInteger(o.maxAge))throw new TypeError(`option maxAge is invalid: ${o.maxAge}`);u+="; Max-Age="+o.maxAge}if(o.domain){if(!r.test(o.domain))throw new TypeError(`option domain is invalid: ${o.domain}`);u+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw new TypeError(`option path is invalid: ${o.path}`);u+="; Path="+o.path}if(o.expires){if(!function(e){return"[object Date]"===s.call(e)}(o.expires)||!Number.isFinite(o.expires.valueOf()))throw new TypeError(`option expires is invalid: ${o.expires}`);u+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(u+="; HttpOnly");o.secure&&(u+="; Secure");o.partitioned&&(u+="; Partitioned");if(o.priority){switch("string"==typeof o.priority?o.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${o.priority}`)}}if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${o.sameSite}`)}}return u};const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function a(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function o(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}}();
/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var y="popstate";function w(e={}){return function(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",l=null,c=u();null==c&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function d(e,t){o="PUSH";let r=k(m.location,e,t);c=u()+1;let n=x(r,c),h=m.createHref(r);try{a.pushState(n,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(h)}i&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o="REPLACE";let r=k(m.location,e,t);c=u();let n=x(r,c),s=m.createHref(r);a.replaceState(n,"",s),i&&l&&l({action:o,location:m.location,delta:0})}function f(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"==typeof e?e:j(e);return r=r.replace(/ $/,"%20"),b(t,`No window.location.(origin|href) available to create URL for href: ${r}`),new URL(r,t)}let m={get action(){return o},get location(){return e(s,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(y,h),l=e,()=>{s.removeEventListener(y,h),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:p,go:e=>a.go(e)};return m}((function(e,t){let{pathname:r,search:n,hash:s}=e.location;return k("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:j(t)}),0,e)}function b(e,t){if(!1===e||null==e)throw new Error(t)}function _(e,t){if(!e)try{throw new Error(t)}catch(r){}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function k(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?S(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function j({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function S(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function E(e,t,r="/"){return function(e,t,r,n){let s="string"==typeof t?S(t):t,i=B(s.pathname||"/",r);if(null==i)return null;let a=T(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=M(i);o=D(a[l],e,n)}return o}(e,t,r,!1)}function T(e,t=[],r=[],n=""){let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(b(a.relativePath.startsWith(n),`Absolute route path "${a.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(n.length));let o=J([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(b(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),T(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:L(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&(null==(r=e.path)?void 0:r.includes("?")))for(let n of C(e.path))s(e,t,n);else s(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return s?[i,""]:[i];let a=C(n.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var P=/^:[\w-]+$/,O=3,$=2,R=1,A=10,N=-2,I=e=>"*"===e;function L(e,t){let r=e.split("/"),n=r.length;return r.some(I)&&(n+=N),t&&(n+=$),r.filter((e=>!I(e))).reduce(((e,t)=>e+(P.test(t)?O:""===t?R:A)),n)}function D(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",a=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:J([i,u.pathname]),pathnameBase:q(J([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=J([i,u.pathnameBase]))}return a}function U(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){_("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce(((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[n];return e[t]=r&&!s?void 0:(s||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return _(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function F(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function z(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,r)=>r===t.length-1?e.pathname:e.pathnameBase))}function H(e,t,r,n=!1){let s;"string"==typeof e?s=S(e):(s={...e},b(!s.pathname||!s.pathname.includes("?"),F("?","pathname","search",s)),b(!s.pathname||!s.pathname.includes("#"),F("#","pathname","hash",s)),b(!s.search||!s.search.includes("#"),F("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:s=""}="string"==typeof e?S(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:W(n),hash:K(s)}}(s,i),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),W=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var V=["POST","PUT","PATCH","DELETE"];new Set(V);var G=["GET",...V];new Set(G);var Y=s.createContext(null);Y.displayName="DataRouter";var X=s.createContext(null);X.displayName="DataRouterState";var Q=s.createContext({isTransitioning:!1});Q.displayName="ViewTransition",s.createContext(new Map).displayName="Fetchers",s.createContext(null).displayName="Await";var Z=s.createContext(null);Z.displayName="Navigation";var ee=s.createContext(null);ee.displayName="Location";var te=s.createContext({outlet:null,matches:[],isDataRoute:!1});te.displayName="Route";var re=s.createContext(null);function ne(){return null!=s.useContext(ee)}function se(){return b(ne(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(ee).location}re.displayName="RouteError";var ie="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ae(e){s.useContext(Z).static||s.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=s.useContext(te);return e?function(){let{router:e}=function(e){let t=s.useContext(Y);return b(t,fe(e)),t}("useNavigate"),t=me("useNavigate"),r=s.useRef(!1);return ae((()=>{r.current=!0})),s.useCallback((async(n,s={})=>{_(r.current,ie),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))}),[e,t])}():function(){b(ne(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext(Y),{basename:t,navigator:r}=s.useContext(Z),{matches:n}=s.useContext(te),{pathname:i}=se(),a=JSON.stringify(z(n)),o=s.useRef(!1);return ae((()=>{o.current=!0})),s.useCallback(((n,s={})=>{if(_(o.current,ie),!o.current)return;if("number"==typeof n)return void r.go(n);let l=H(n,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:J([t,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)}),[t,r,a,i,e])}()}function le(e,{relative:t}={}){let{matches:r}=s.useContext(te),{pathname:n}=se(),i=JSON.stringify(z(r));return s.useMemo((()=>H(e,JSON.parse(i),n,"path"===t)),[e,i,n,t])}function ce(e,t,r,n){var i;b(ne(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=s.useContext(Z),{matches:o}=s.useContext(te),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";ve(u,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=se();if(t){let e="string"==typeof t?S(t):t;b("/"===h||(null==(i=e.pathname)?void 0:i.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=E(e,{pathname:g});_(d||null!=v,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),_(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],r=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let n=e,i=null==r?void 0:r.errors;if(null!=i){let e=n.findIndex((e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id])));b(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let a=!1,o=-1;if(r)for(let s=0;s<n.length;s++){let e=n[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=s),e.route.id){let{loaderData:t,errors:s}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||i){a=!0,n=o>=0?n.slice(0,o+1):[n[0]];break}}}return n.reduceRight(((e,l,c)=>{let u,h=!1,d=null,p=null;r&&(u=i&&l.route.id?i[l.route.id]:void 0,d=l.route.errorElement||he,a&&(o<0&&0===c?(ve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):o===c&&(h=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(n.slice(0,c+1)),m=()=>{let t;return t=u?d:h?p:l.route.Component?s.createElement(l.route.Component,null):l.route.element?l.route.element:e,s.createElement(pe,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?s.createElement(de,{location:r.location,revalidation:r.revalidation,component:d,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:J([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,n);return t&&y?s.createElement(ee.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function ue(){let e=function(){var e;let t=s.useContext(re),r=function(e){let t=s.useContext(X);return b(t,fe(e)),t}("useRouteError"),n=me("useRouteError");if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return o=s.createElement(s.Fragment,null,s.createElement("p",null,"💿 Hey developer 👋"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:a},"ErrorBoundary")," or"," ",s.createElement("code",{style:a},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),r?s.createElement("pre",{style:i},r):null,o)}s.createContext(null);var he=s.createElement(ue,null),de=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?s.createElement(te.Provider,{value:this.props.routeContext},s.createElement(re.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pe({routeContext:e,match:t,children:r}){let n=s.useContext(Y);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),s.createElement(te.Provider,{value:e},r)}function fe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function me(e){let t=function(e){let t=s.useContext(te);return b(t,fe(e)),t}(e),r=t.matches[t.matches.length-1];return b(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var ge={};function ve(e,t,r){t||ge[e]||(ge[e]=!0,_(!1,r))}function ye({to:e,replace:t,state:r,relative:n}){b(ne(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=s.useContext(Z);_(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=s.useContext(te),{pathname:o}=se(),l=oe(),c=H(e,z(a),o,"path"===n),u=JSON.stringify(c);return s.useEffect((()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})}),[l,u,n,t,r]),null}function we(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function be({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){b(!ne(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=s.useMemo((()=>({basename:o,navigator:i,static:a,future:{}})),[o,i,a]);"string"==typeof r&&(r=S(r));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:p="default"}=r,f=s.useMemo((()=>{let e=B(c,o);return null==e?null:{location:{pathname:e,search:u,hash:h,state:d,key:p},navigationType:n}}),[o,c,u,h,d,p,n]);return _(null!=f,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:s.createElement(Z.Provider,{value:l},s.createElement(ee.Provider,{children:t,value:f}))}function _e({children:e,location:t}){return ce(xe(e),t)}function xe(e,t=[]){let r=[];return s.Children.forEach(e,((e,n)=>{if(!s.isValidElement(e))return;let i=[...t,n];if(e.type===s.Fragment)return void r.push.apply(r,xe(e.props.children,i));b(e.type===we,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=xe(e.props.children,i)),r.push(a)})),r}s.memo((function({routes:e,future:t,state:r}){return ce(e,void 0,r,t)}));var ke="get",je="application/x-www-form-urlencoded";function Se(e){return null!=e&&"string"==typeof e.tagName}var Ee=null;var Te=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ce(e){return null==e||Te.has(e)?e:(_(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${je}"`),null)}function Pe(e,t){let r,n,s,i,a;if(Se(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");n=a?B(a,t):null,r=e.getAttribute("method")||ke,s=Ce(e.getAttribute("enctype"))||je,i=new FormData(e)}else if(function(e){return Se(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Se(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(n=o?B(o,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||ke,s=Ce(e.getAttribute("formenctype"))||Ce(a.getAttribute("enctype"))||je,i=new FormData(a,e),!function(){if(null===Ee)try{new FormData(document.createElement("form"),0),Ee=!1}catch(e){Ee=!0}return Ee}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,n)}}else{if(Se(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ke,n=null,s=je,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}function Oe(e,t){if(!1===e||null==e)throw new Error(t)}function $e(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Re(e,t,r){return function(e,t){let r=new Set;return new Set(t),e.reduce(((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e}),[])}((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(n,r);return e.links?e.links():[]}return[]})))).flat(1).filter($e).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}function Ae(e,t,r,n,s,i){let a=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null==(n=r[t].route.path)?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null==(l=r[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0})):[]}function Ne(e,t){return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let n=[r.module];return r.imports&&(n=n.concat(r.imports)),n})).flat(1),[...new Set(r)];var r}var Ie=s.createContext(void 0);function Le(){let e=s.useContext(Ie);return Oe(e,"You must render this element inside a <HydratedRouter> element"),e}function De(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Ue({page:e,...t}){let{router:r}=function(){let e=s.useContext(Y);return Oe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}(),n=s.useMemo((()=>E(r.routes,e,r.basename)),[r.routes,e,r.basename]);return n?s.createElement(Me,{page:e,matches:n,...t}):null}function Me({page:e,matches:t,...r}){let n=se(),{manifest:i,routeModules:a}=Le(),{loaderData:o,matches:l}=function(){let e=s.useContext(X);return Oe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=s.useMemo((()=>Ae(e,t,l,i,n,"data")),[e,t,l,i,n]),u=s.useMemo((()=>Ae(e,t,l,i,n,"assets")),[e,t,l,i,n]),h=s.useMemo((()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,s=!1;if(t.forEach((e=>{var t;let n=i.routes[e.route.id];n&&n.hasLoader&&(!c.some((t=>t.route.id===e.route.id))&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?s=!0:r.add(e.route.id))})),0===r.size)return[];let l=function(e){let t="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===t.pathname?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}(e);return s&&r.size>0&&l.searchParams.set("_routes",t.filter((e=>r.has(e.route.id))).map((e=>e.route.id)).join(",")),[l.pathname+l.search]}),[o,n,i,c,t,e,a]),d=s.useMemo((()=>Ne(u,i)),[u,i]),p=function(e){let{manifest:t,routeModules:r}=Le(),[n,i]=s.useState([]);return s.useEffect((()=>{let n=!1;return Re(e,t,r).then((e=>{n||i(e)})),()=>{n=!0}}),[e,t,r]),n}(u);return s.createElement(s.Fragment,null,h.map((e=>s.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),d.map((e=>s.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),p.map((({key:e,link:t})=>s.createElement("link",{key:e,...t}))))}function Be(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}Ie.displayName="FrameworkContext";var Fe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Fe&&(window.__reactRouterVersion="7.1.3")}catch(Ns){}function ze({basename:e,children:t,window:r}){let n=s.useRef();null==n.current&&(n.current=w({window:r,v5Compat:!0}));let i=n.current,[a,o]=s.useState({action:i.action,location:i.location}),l=s.useCallback((e=>{s.startTransition((()=>o(e)))}),[o]);return s.useLayoutEffect((()=>i.listen(l)),[i,l]),s.createElement(be,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var He=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Je=s.forwardRef((function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},p){let f,{basename:m}=s.useContext(Z),g="string"==typeof c&&He.test(c),v=!1;if("string"==typeof c&&g&&(f=c,Fe))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=B(t.pathname,m);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:v=!0}catch(Ns){_(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){b(ne(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=s.useContext(Z),{hash:i,pathname:a,search:o}=le(e,{relative:t}),l=a;return"/"!==r&&(l="/"===a?r:J([r,a])),n.createHref({pathname:l,search:o,hash:i})}(c,{relative:n}),[w,x,k]=function(e,t){let r=s.useContext(Ie),[n,i]=s.useState(!1),[a,o]=s.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,p=s.useRef(null);s.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),s.useEffect((()=>{if(n){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[n]);let f=()=>{i(!0)},m=()=>{i(!1),o(!1)};return r?"intent"!==e?[a,p,{}]:[a,p,{onFocus:De(l,f),onBlur:De(c,m),onMouseEnter:De(u,f),onMouseLeave:De(h,m),onTouchStart:De(d,f)}]:[!1,p,{}]}(r,d),S=function(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let l=oe(),c=se(),u=le(e,{relative:a});return s.useCallback((s=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(s,t)){s.preventDefault();let t=void 0!==r?r:j(c)===j(u);l(e,{replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:o})}}),[c,l,u,r,n,t,e,i,a,o])}(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:n,viewTransition:h});let E=s.createElement("a",{...d,...k,href:f||y,onClick:v||i?e:function(t){e&&e(t),t.defaultPrevented||S(t)},ref:Be(p,x),target:l,"data-discover":g||"render"!==t?void 0:"true"});return w&&!g?s.createElement(s.Fragment,null,E,s.createElement(Ue,{page:y})):E}));Je.displayName="Link",s.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:i,to:a,viewTransition:o,children:l,...c},u){let h=le(a,{relative:c.relative}),d=se(),p=s.useContext(X),{navigator:f,basename:m}=s.useContext(Z),g=null!=p&&function(e,t={}){let r=s.useContext(Q);b(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=We("useViewTransitionState"),i=le(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=B(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=B(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=U(i.pathname,o)||null!=U(i.pathname,a)}(h)&&!0===o,v=f.encodeLocation?f.encodeLocation(h).pathname:h.pathname,y=d.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(y=y.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&m&&(w=B(w,m)||w);const _="/"!==v&&v.endsWith("/")?v.length-1:v.length;let x,k=y===v||!n&&y.startsWith(v)&&"/"===y.charAt(_),j=null!=w&&(w===v||!n&&w.startsWith(v)&&"/"===w.charAt(v.length)),S={isActive:k,isPending:j,isTransitioning:g},E=k?e:void 0;x="function"==typeof r?r(S):[r,k?"active":null,j?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let T="function"==typeof i?i(S):i;return s.createElement(Je,{...c,"aria-current":E,className:x,ref:u,style:T,to:a,viewTransition:o},"function"==typeof l?l(S):l)})).displayName="NavLink";var qe=s.forwardRef((({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:o=ke,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,...p},f)=>{let m=function(){let{router:e}=We("useSubmit"),{basename:t}=s.useContext(Z),r=me("useRouteId");return s.useCallback((async(n,s={})=>{let{action:i,method:a,encType:o,formData:l,body:c}=Pe(n,t);if(!1===s.navigate){let t=s.fetcherKey||Ve();await e.fetch(t,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[e,t,r])}(),g=function(e,{relative:t}={}){let{basename:r}=s.useContext(Z),n=s.useContext(te);b(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...le(e||".",{relative:t})},o=se();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let r=e.toString();a.search=r?`?${r}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:J([r,a.pathname]));return j(a)}(l,{relative:u}),v="get"===o.toLowerCase()?"get":"post",y="string"==typeof l&&He.test(l);return s.createElement("form",{ref:f,method:v,action:g,onSubmit:n?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,s=(null==n?void 0:n.getAttribute("formmethod"))||o;m(n||e.currentTarget,{fetcherKey:t,method:s,navigate:r,replace:i,state:a,relative:u,preventScrollReset:h,viewTransition:d})},...p,"data-discover":y||"render"!==e?void 0:"true"})}));function We(e){let t=s.useContext(Y);return b(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}qe.displayName="Form";var Ke=0,Ve=()=>`__${String(++Ke)}__`;new TextEncoder;class Ge extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Ye extends Ge{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xe extends Ge{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qe extends Ge{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ze,et;(et=Ze||(Ze={})).Any="any",et.ApNortheast1="ap-northeast-1",et.ApNortheast2="ap-northeast-2",et.ApSouth1="ap-south-1",et.ApSoutheast1="ap-southeast-1",et.ApSoutheast2="ap-southeast-2",et.CaCentral1="ca-central-1",et.EuCentral1="eu-central-1",et.EuWest1="eu-west-1",et.EuWest2="eu-west-2",et.EuWest3="eu-west-3",et.SaEast1="sa-east-1",et.UsEast1="us-east-1",et.UsWest1="us-west-1",et.UsWest2="us-west-2";var tt=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class rt{constructor(e,{headers:t={},customFetch:r,region:n=Ze.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>m((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),[]).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return tt(this,void 0,void 0,(function*(){try{const{headers:n,method:s,body:i}=t;let a,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(o["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:a}).catch((e=>{throw new Ye(e)})),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new Xe(c);if(!c.ok)throw new Qe(c);let h,d=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===d?yield c.json():"application/octet-stream"===d?yield c.blob():"text/event-stream"===d?c:"multipart/form-data"===d?yield c.formData():yield c.text(),{data:h,error:null}}catch(n){return{data:null,error:n}}}))}}var nt={},st={},it={},at={},ot={},lt={},ct=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const ut=ct.fetch,ht=ct.fetch.bind(ct),dt=ct.Headers,pt=ct.Request,ft=ct.Response,mt=Object.freeze(Object.defineProperty({__proto__:null,Headers:dt,Request:pt,Response:ft,default:ht,fetch:ut},Symbol.toStringTag,{value:"Module"})),gt=r(mt);var vt,yt,wt,bt,_t,xt={};function kt(){if(vt)return xt;vt=1,Object.defineProperty(xt,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return xt.default=e,xt}function jt(){if(yt)return lt;yt=1;var e=lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});const t=e(gt),r=e(kt());return lt.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let i=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),s=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&s&&s.length>1&&(o=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(a=[],i=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new r.default(i)}return{error:i,data:a,count:o,status:l,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}},lt}function St(){if(wt)return ot;wt=1;var e=ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ot,"__esModule",{value:!0});const t=e(jt());class r extends t.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=void 0===n?"offset":`${n}.offset`,i=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ot.default=r,ot}function Et(){if(bt)return at;bt=1;var e=at.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});const t=e(St());class r extends t.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return at.default=r,at}function Tt(){if(_t)return it;_t=1;var e=it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(it,"__esModule",{value:!0});const t=e(Et());return it.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==r&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new t.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new t.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},it}var Ct,Pt,Ot,$t,Rt={},At={};function Nt(){if(Pt)return Rt;Pt=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.DEFAULT_HEADERS=void 0;const e=(Ct||(Ct=1,Object.defineProperty(At,"__esModule",{value:!0}),At.version=void 0,At.version="0.0.0-automated"),At);return Rt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Rt}const It=n(function(){if($t)return nt;$t=1;var e=nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const t=e(function(){if(Ot)return st;Ot=1;var e=st.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(st,"__esModule",{value:!0});const t=e(Tt()),r=e(Et()),n=Nt();class s{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{o.searchParams.append(e,t)}))):(a="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new r.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}return st.default=s,st}());nt.PostgrestClient=t.default;const r=e(Tt());nt.PostgrestQueryBuilder=r.default;const n=e(Et());nt.PostgrestFilterBuilder=n.default;const s=e(St());nt.PostgrestTransformBuilder=s.default;const i=e(jt());nt.PostgrestBuilder=i.default;const a=e(kt());return nt.PostgrestError=a.default,nt.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},nt}()),{PostgrestClient:Lt,PostgrestQueryBuilder:Dt,PostgrestFilterBuilder:Ut,PostgrestTransformBuilder:Mt,PostgrestBuilder:Bt,PostgrestError:Ft}=It,zt={"X-Client-Info":"realtime-js/2.11.2"};var Ht,Jt,qt,Wt,Kt,Vt,Gt,Yt,Xt,Qt,Zt;(Jt=Ht||(Ht={}))[Jt.connecting=0]="connecting",Jt[Jt.open=1]="open",Jt[Jt.closing=2]="closing",Jt[Jt.closed=3]="closed",(Wt=qt||(qt={})).closed="closed",Wt.errored="errored",Wt.joined="joined",Wt.joining="joining",Wt.leaving="leaving",(Vt=Kt||(Kt={})).close="phx_close",Vt.error="phx_error",Vt.join="phx_join",Vt.reply="phx_reply",Vt.leave="phx_leave",Vt.access_token="access_token",(Gt||(Gt={})).websocket="websocket",(Xt=Yt||(Yt={})).Connecting="connecting",Xt.Open="open",Xt.Closing="closing",Xt.Closed="closed";class er{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+n));i+=n;const o=r.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}}class tr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}(Zt=Qt||(Qt={})).abstime="abstime",Zt.bool="bool",Zt.date="date",Zt.daterange="daterange",Zt.float4="float4",Zt.float8="float8",Zt.int2="int2",Zt.int4="int4",Zt.int4range="int4range",Zt.int8="int8",Zt.int8range="int8range",Zt.json="json",Zt.jsonb="jsonb",Zt.money="money",Zt.numeric="numeric",Zt.oid="oid",Zt.reltime="reltime",Zt.text="text",Zt.time="time",Zt.timestamp="timestamp",Zt.timestamptz="timestamptz",Zt.timetz="timetz",Zt.tsrange="tsrange",Zt.tstzrange="tstzrange";const rr=(e,t,r={})=>{var n;const s=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((r,n)=>(r[n]=nr(n,e,t,s),r)),{})},nr=(e,t,r,n)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,a=r[e];return i&&!n.includes(i)?sr(i,a):ir(a)},sr=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return cr(t,r)}switch(e){case Qt.bool:return ar(t);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return or(t);case Qt.json:case Qt.jsonb:return lr(t);case Qt.timestamp:return ur(t);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:default:return ir(t)}},ir=e=>e,ar=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},or=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},cr=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(s){n=i?i.split(","):[]}return n.map((e=>sr(t,e)))}return e},ur=e=>"string"==typeof e?e.replace(" ","T"):e,hr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class dr{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pr,fr,mr,gr,vr,yr,wr,br;(fr=pr||(pr={})).SYNC="sync",fr.JOIN="join",fr.LEAVE="leave";class _r{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_r.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=_r.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=_r.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const r=s[e];if(r){const n=t.map((e=>e.presence_ref)),s=r.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),l=r.filter((e=>n.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(s,{joins:a,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,((t,n)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),i.length>0){const r=e[t].map((e=>e.presence_ref)),n=i.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,i,n)})),this.map(i,((t,r)=>{let s=e[t];if(!s)return;const i=r.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,n(t,s,r),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(gr=mr||(mr={})).ALL="*",gr.INSERT="INSERT",gr.UPDATE="UPDATE",gr.DELETE="DELETE",(yr=vr||(vr={})).BROADCAST="broadcast",yr.PRESENCE="presence",yr.POSTGRES_CHANGES="postgres_changes",yr.SYSTEM="system",(br=wr||(wr={})).SUBSCRIBED="SUBSCRIBED",br.TIMED_OUT="TIMED_OUT",br.CLOSED="CLOSED",br.CHANNEL_ERROR="CHANNEL_ERROR";class xr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new dr(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new tr((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Kt.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new _r(this),this.broadcastEndpointURL=hr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError((t=>null==e?void 0:e(wr.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(wr.CLOSED)));const o={},l={broadcast:s,presence:i,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,s=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,i=[];for(let r=0;r<s;r++){const s=n[r],{filter:{event:a,schema:o,table:l,filter:c}}=s,u=t&&t[r];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),void(null==e||e(wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(wr.SUBSCRIBED))}null==e||e(wr.SUBSCRIBED)})).receive("error",(t=>{null==e||e(wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(wr.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((r=>{var n,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||r("ok"),a.receive("ok",(()=>r("ok"))),a.receive("error",(()=>r("error"))),a.receive("timeout",(()=>r("timed out")))}));{const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((r=>{const n=new dr(this,Kt.leave,{},e);n.receive("ok",(()=>{t(),r("ok")})).receive("timeout",(()=>{t(),r("timed out")})).receive("error",(()=>{r("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}async _fetchWithTimeout(e,t,r){const n=new AbortController,s=setTimeout((()=>n.abort()),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dr(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Kt;if(r&&[a,o,l,c].indexOf(i)>=0&&r!==this._joinRef())return;let u=this._onMessage(i,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===i})).map((e=>e.callback(u,r))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var r,n,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:i}=e,a={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,r)}))}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&xr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kt.close,{},e)}_onError(e){this._on(Kt.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=rr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=rr(e.columns,e.old_record)),t}}const kr=()=>{},jr="undefined"!=typeof WebSocket;class Sr{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=zt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=kr,this.conn=null,this.sendBuffer=[],this.serializer=new er,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>m((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Gt.websocket}`,this.httpEndpoint=hr(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tr((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(jr)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new Er(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),m((async()=>{const{default:e}=await import("./browser-Do9XVDE8.js").then((e=>e.b));return{default:e}}),__vite__mapDeps([0,1])).then((({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ht.connecting:return Yt.Connecting;case Ht.open:return Yt.Open;case Ht.closing:return Yt.Closing;default:return Yt.Closed}}isConnected(){return this.connectionState()===Yt.Open}channel(e,t={config:{}}){const r=new xr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:s}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(r){}if(e&&e.exp){if(!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`)}this.accessTokenValue=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(Kt.access_token,{access_token:t})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:r,payload:n,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${s&&"("+s+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Kt.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Er{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ht.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Tr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Cr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Pr extends Tr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Or extends Tr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $r=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const Rr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>m((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Ar=e=>{if(Array.isArray(e))return e.map((e=>Ar(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,r])=>{const n=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[n]=Ar(r)})),t};var Nr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const Ir=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Lr=(e,t,r)=>Nr(void 0,void 0,void 0,(function*(){const n=yield $r(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield m((()=>Promise.resolve().then((()=>mt))),void 0)).Response:Response}));e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then((r=>{t(new Pr(Ir(r),e.status||500))})).catch((e=>{t(new Or(Ir(e),e))})):t(new Or(Ir(e),e))}));function Dr(e,t,r,n,s,i){return Nr(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(r,((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))})(t,n,s,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>Lr(e,o,n)))}))}))}function Ur(e,t,r,n){return Nr(this,void 0,void 0,(function*(){return Dr(e,"GET",t,r,n)}))}function Mr(e,t,r,n,s){return Nr(this,void 0,void 0,(function*(){return Dr(e,"POST",t,n,s,r)}))}function Br(e,t,r,n,s){return Nr(this,void 0,void 0,(function*(){return Dr(e,"DELETE",t,n,s,r)}))}var Fr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const zr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jr{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Rr(n)}uploadOrUpdate(e,t,r,n){return Fr(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},Hr),n);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==n?void 0:n.headers)&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),h=yield u.json();if(u.ok)return{data:{path:l,id:h.Id,fullPath:h.Key},error:null};return{data:null,error:h}}catch(s){if(Cr(s))return{data:null,error:s};throw s}}))}upload(e,t,r){return Fr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}uploadToSignedUrl(e,t,r,n){return Fr(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Hr.upsert},n),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:s,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(Cr(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e,t){return Fr(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const s=yield Mr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new Tr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}}))}update(e,t,r){return Fr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t,r){return Fr(this,void 0,void 0,(function*(){try{return{data:yield Mr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}}))}copy(e,t,r){return Fr(this,void 0,void 0,(function*(){try{return{data:{path:(yield Mr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}}))}createSignedUrl(e,t,r){return Fr(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),s=yield Mr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}}))}createSignedUrls(e,t,r){return Fr(this,void 0,void 0,(function*(){try{const n=yield Mr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}}))}download(e,t){return Fr(this,void 0,void 0,(function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Ur(this.fetch,`${this.url}/${r}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(i){if(Cr(i))return{data:null,error:i};throw i}}))}info(e){return Fr(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield Ur(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ar(e),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}}))}exists(e){return Fr(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Nr(this,void 0,void 0,(function*(){return Dr(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Cr(r)&&r instanceof Or){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}remove(e){return Fr(this,void 0,void 0,(function*(){try{return{data:yield Br(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}}))}list(e,t,r){return Fr(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},zr),t),{prefix:e||""});return{data:yield Mr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qr={"X-Client-Info":"storage-js/2.7.1"};var Wr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Kr{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},qr),t),this.fetch=Rr(r)}listBuckets(){return Wr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Cr(e))return{data:null,error:e};throw e}}))}getBucket(e){return Wr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}}))}createBucket(e,t={public:!1}){return Wr(this,void 0,void 0,(function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}}))}updateBucket(e,t){return Wr(this,void 0,void 0,(function*(){try{const r=yield function(e,t,r,n,s){return Nr(this,void 0,void 0,(function*(){return Dr(e,"PUT",t,n,s,r)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:r,error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}}))}emptyBucket(e){return Wr(this,void 0,void 0,(function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return Wr(this,void 0,void 0,(function*(){try{return{data:yield Br(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}}))}}class Vr extends Kr{constructor(e,t={},r){super(e,t,r)}from(e){return new Jr(this.url,this.headers,e,this.fetch)}}let Gr="";Gr="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Yr={headers:{"X-Client-Info":`supabase-js-${Gr}/2.48.1`}},Xr={schema:"public"},Qr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zr={};var en=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const tn=(e,t,r)=>{const n=(e=>{let t;return t=e||("undefined"==typeof fetch?ht:fetch),(...e)=>t(...e)})(r),s="undefined"==typeof Headers?dt:Headers;return(r,i)=>en(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},i),{headers:l}))}))};var rn=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const nn="2.67.3",sn={"X-Client-Info":`gotrue-js/${nn}`},an="X-Supabase-Api-Version",on={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"};const ln=()=>"undefined"!=typeof window&&"undefined"!=typeof document,cn={tested:!1,writable:!1},un=()=>{if(!ln())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Ns){return!1}if(cn.tested)return cn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cn.tested=!0,cn.writable=!0}catch(Ns){cn.tested=!0,cn.writable=!1}return cn.writable};const hn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>m((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},dn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},pn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},fn=async(e,t)=>{await e.removeItem(t)};class mn{constructor(){this.promise=new mn.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function gn(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,s,i,a,o,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),r=i<<2|a>>4,n=(15&a)<<4|o>>2,s=(3&o)<<6|l,c+=String.fromCharCode(r),64!=o&&0!=n&&(c+=String.fromCharCode(n)),64!=l&&0!=s&&(c+=String.fromCharCode(s));return c}(r))}function vn(e){return("0"+e.toString(16)).substr(-2)}async function yn(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wn(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,vn).join("")}();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await dn(e,`${t}-code-verifier`,s);const i=await yn(n);return[i,n===i?"plain":"s256"]}mn.promiseConstructor=Promise;const bn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class _n extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function xn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class kn extends _n{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class jn extends _n{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Sn extends _n{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class En extends Sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Tn extends Sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cn extends Sn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pn extends Sn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class On extends Sn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $n extends Sn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rn(e){return xn(e)&&"AuthRetryableFetchError"===e.name}class An extends Sn{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}const Nn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),In=[502,503,504];async function Ln(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new $n(Nn(e),0);if(In.includes(e.status))throw new $n(Nn(e),e.status);let n,s;try{n=await e.json()}catch(Ns){throw new jn(Nn(Ns),Ns)}const i=function(e){const t=e.headers.get(an);if(!t)return null;if(!t.match(bn))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Ns){return null}}(e);if(i&&i.getTime()>=on.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?s=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(s=n.error_code),s){if("weak_password"===s)throw new An(Nn(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new En}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new An(Nn(n),e.status,n.weak_password.reasons);throw new kn(Nn(n),e.status||500,s)}async function Dn(e,t,r,n){var s;const i=Object.assign({},null==n?void 0:n.headers);i[an]||(i[an]=on.name),(null==n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const a=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,n,s,i){const a=((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))})(t,n,s,i);let o;try{o=await e(r,Object.assign({},a))}catch(Ns){throw new $n(Nn(Ns),0)}o.ok||await Ln(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(Ns){await Ln(Ns)}}(e,t,r+o,{headers:i,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Un(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Mn(e){const t=Un(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Bn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Fn(e){return{data:e,error:null}}function zn(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function Hn(e){return e}class Jn{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=hn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Dn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Dn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Bn})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await Dn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:zn,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(xn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Dn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bn})}catch(t){if(xn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Dn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:Hn});if(c.error)throw c.error;const u=await c.json(),h=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t})),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(xn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await Dn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bn})}catch(t){if(xn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Dn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Bn})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Bn})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Dn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(xn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xn(t))return{data:null,error:t};throw t}}}const qn={getItem:e=>un()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{un()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{un()&&globalThis.localStorage.removeItem(e)}};function Wn(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Kn=!!(globalThis&&un()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Vn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gn extends Vn{}async function Yn(e,t,r){const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort()}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw new Gn(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kn)try{await globalThis.navigator.locks.query()}catch(Ns){}return await r()}try{return await r()}finally{}}))))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Ns){"undefined"!=typeof self&&(self.globalThis=self)}}();const Xn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Qn=3e4;async function Zn(e,t,r){return await r()}class es{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=es.nextInstanceID,es.nextInstanceID+=1,this.instanceID>0&&ln();const n=Object.assign(Object.assign({},Xn),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Jn({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=hn(n.fetch),this.lock=n.lock||Zn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ln()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Yn:this.lock=Zn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:un()?this.storage=qn:(this.memoryStorage={},this.storage=Wn(this.memoryStorage)):(this.memoryStorage={},this.storage=Wn(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Ns){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nn}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach(((e,r)=>{t[r]=e}))}catch(Ns){}return r.searchParams.forEach(((e,r)=>{t[r]=e})),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ln()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return xn(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xn(t)?{error:t}:{error:new jn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Un}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(xn(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){const{email:r,password:n,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await wn(this.storage,this.storageKey)),s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:Un})}else{if(!("phone"in e))throw new Cn("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(n=null==a?void 0:a.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Un})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(xn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:s}=e;t=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Mn})}else{if(!("phone"in e))throw new Cn("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:s}=e;t=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Mn})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Tn}}catch(t){if(xn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await pn(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Un});if(await fn(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new Tn}}catch(s){if(xn(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:s,nonce:i}=e,a=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Un}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Tn}}catch(t){if(xn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,s,i;try{if("email"in e){const{email:n,options:s}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await wn(this.storage,this.storageKey));const{error:o}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:o}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(i=null==r?void 0:r.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new Cn("You must provide either an email or phone number.")}catch(a){if(xn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:i,error:a}=await Dn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:Un});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(xn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let s=null,i=null;return"pkce"===this.flowType&&([s,i]=await wn(this.storage,this.storageKey)),await Dn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Fn})}catch(s){if(xn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new En;const{error:n}=await Dn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(xn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:s}=e,{error:i}=await Dn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:r,type:n,options:s}=e,{data:i,error:a}=await Dn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new Cn("You must provide either an email or phone number and a type")}catch(t){if(xn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(Ns){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Ns){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bn}):await this._useSession((async e=>{var t,r,n;const{data:s,error:i}=e;if(i)throw i;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Bn}):{data:{user:null},error:new En}}))}catch(t){if(xn(t))return function(e){return xn(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async r=>{const{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new En;const i=n.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await wn(this.storage,this.storageKey));const{data:l,error:c}=await Dn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:Bn});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return gn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new En;const t=Date.now()/1e3;let r=t,n=!0,s=null;const i=gn(e.access_token);if(i.exp&&(r=i.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(xn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var r;if(!e){const{data:n,error:s}=t;if(s)throw s;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new En;const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(xn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ln())throw new Pn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new On("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Pn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new On("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!(s&&a&&i&&l))throw new Pn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;o&&(h=parseInt(o));const{data:d,error:p}=await this._getUser(s);if(p)throw p;const f={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:l,user:d.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(xn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var r;const{data:n,error:s}=t;if(s)return{error:s};const i=null===(r=n.session)||void 0===r?void 0:r.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return xn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession((async t=>{var r,n;try{const{data:{session:n},error:s}=t;if(s)throw s;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(s){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}}))}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await wn(this.storage,this.storageKey,!0));try{return await Dn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(xn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(xn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession((async t=>{var r,n,s,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Dn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(n)throw n;return ln()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(xn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var r,n;const{data:s,error:i}=t;if(i)throw i;return await Dn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})}))}catch(t){if(xn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Dn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Un})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Rn(t)&&Date.now()+r-s<Qn},new Promise(((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!n(s,null,t))return void e(t)}catch(Ns){if(!n(s,Ns))return void t(Ns)}})()})))}catch(s){if(this._debug(t,"error",s),xn(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ln()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await pn(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&await this._removeSession());const n=Math.round(Date.now()/1e3),s=(null!==(e=r.expires_at)&&void 0!==e?e:1/0)<n+10;if(this._debug(t,`session has${s?"":" not"} expired with margin of 10s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(Rn(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return void this._debug(t,"error",r)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new En;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new mn;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new En;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(s){if(this._debug(n,"error",s),xn(s)){const e={session:null,error:s};return Rn(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],s=Array.from(this.stateChangeEmitters.values()).map((async r=>{try{await r.callback(e,t)}catch(Ns){n.push(Ns)}}));if(await Promise.all(s),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await fn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Ns){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Qn);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)}))}catch(Ns){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(Ns){if(!(Ns.isAcquireTimeout||Ns instanceof Vn))throw Ns;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await wn(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Dn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})}))}catch(t){if(xn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var r,n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Dn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(t){if(xn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await Dn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(t){if(xn(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Dn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})}))}catch(t){if(xn(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),s=r.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:r,totp:n,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,r;const{data:{session:n},error:s}=e;if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}es.nextInstanceID=0;const ts=es;class rs extends ts{constructor(e){super(e)}}var ns=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{l(n.next(e))}catch(Ns){i(Ns)}}function o(e){try{l(n.throw(e))}catch(Ns){i(Ns)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class ss{constructor(e,t,r){var n,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:a,auth:o,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>rn(this,void 0,void 0,(function*(){return""}))};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=r?r:{},{db:Xr,realtime:Zr,auth:Object.assign(Object.assign({},Qr),{storageKey:o}),global:Yr});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=tn(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Lt(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new rt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Vr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ns(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:s,flowType:i,lock:a,debug:o},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rs({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:i,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Sr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}const is=new ss("https://murgkobiggbvwwfhwlic.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11cmdrb2JpZ2didnd3Zmh3bGljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgyNjEwNzAsImV4cCI6MjA1MzgzNzA3MH0.FYLP4yAcEdcqr8vNj2gGKdKfxYtolEYC59VWzTqQCmE",as);var as;const os=s.createContext({}),ls=({children:e})=>{const[t,r]=s.useState(null),[n,i]=s.useState(!0);s.useEffect((()=>{is.auth.getSession().then((({data:{session:e}})=>{r((null==e?void 0:e.user)??null),i(!1)}));const{data:{subscription:e}}=is.auth.onAuthStateChange(((e,t)=>{r((null==t?void 0:t.user)??null)}));return()=>e.unsubscribe()}),[]);const a={user:t,loading:n,signOut:()=>is.auth.signOut()};return h.jsx(os.Provider,{value:a,children:!n&&e})},cs=()=>s.useContext(os);function us(e){return i({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(e)}function hs(e){return i({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"},child:[]}]})(e)}function ds(e){return i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"},child:[]}]})(e)}function ps(e){return i({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function fs(e){return i({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function ms(e){return i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function gs(e){return i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function vs(e){return i({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"},child:[]}]})(e)}function ys(e){return i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function ws(e){return i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}const bs=({onLogin:e})=>{const[t,r]=s.useState(""),[n,i]=s.useState(""),[a,o]=s.useState(!1),[l,c]=s.useState(null);return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-slate-500 to-slate-700",children:h.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login"}),l&&h.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-600 rounded-lg text-sm",children:l}),h.jsxs("form",{onSubmit:async r=>{r.preventDefault();try{o(!0),c(null);const{data:r,error:s}=await is.auth.signInWithPassword({email:t,password:n});if(s)throw s;(null==r?void 0:r.user)&&e(r.user)}catch(s){c(s.message)}finally{o(!1)}},className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-3 top-3 text-gray-400",children:h.jsx(fs,{})}),h.jsx("input",{type:"email",value:t,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Enter your email",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-3 top-3 text-gray-400",children:h.jsx(ms,{})}),h.jsx("input",{type:"password",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Enter your password",required:!0})]})]}),h.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50",children:a?"Logging in...":"Login"})]})]})})},_s=({children:e})=>h.jsx("header",{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white shadow-lg",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("nav",{className:"flex items-center space-x-6",children:[h.jsx(Je,{to:"/",className:"text-xl font-semibold hover:text-blue-400 transition-colors",children:"Home"}),h.jsx(Je,{to:"/admin",className:"text-xl font-semibold hover:text-blue-400 transition-colors",children:"Admin"})]}),e]})})}),xs=({comment:e,comments:t,onReplyClick:r,onCommentDeleted:n})=>{const{user:s}=cs(),i=s.email===e.user_email||"dana@admin.admin"===s.email,a=e.parent_id?t.find((t=>t.id===e.parent_id)):null;return h.jsx("div",{className:"bg-gray-50 rounded p-3 mb-3 "+(e.parent_id?"ml-8 border-l-4 border-blue-300":""),children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"w-full",children:[a&&h.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Replying to ",h.jsx("span",{className:"text-blue-500 font-medium",children:a.user_name||a.user_email}),"'s comment:",h.jsxs("p",{className:"text-gray-600 italic mt-1 pl-2 border-l-2 border-gray-300",children:['"',a.text.substring(0,60),'..."']})]}),h.jsx("p",{className:"text-gray-800",children:e.text}),h.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500",children:[h.jsx("span",{className:"font-medium text-blue-600",children:e.user_name||e.user_email}),h.jsx("span",{children:"•"}),h.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]}),h.jsxs("div",{className:"flex gap-2 ml-4",children:[h.jsx("button",{onClick:()=>r(e),className:"text-blue-500 hover:text-blue-600 p-1",title:"Reply to this comment",children:h.jsx(vs,{})}),i&&h.jsx("button",{onClick:()=>n(e.id),className:"text-red-500 hover:text-red-600 p-1",title:"Delete comment",children:h.jsx(ws,{})})]})]})})},ks=({contentId:e,parentId:t=null,onCommentAdded:r})=>{const[n,i]=s.useState(""),[a,o]=s.useState(!1),{user:l}=cs();return h.jsxs("form",{onSubmit:async s=>{var a;if(s.preventDefault(),n.trim())try{o(!0);const{data:s,error:c}=await is.from("comments").insert([{content_id:e,parent_id:t,text:n.trim(),user_id:l.id,user_email:l.email,user_name:(null==(a=l.user_metadata)?void 0:a.name)||l.email.split("@")[0]}]).select();if(c)throw c;i(""),r&&r(s[0])}catch(c){}finally{o(!1)}},children:[h.jsx("textarea",{value:n,onChange:e=>i(e.target.value),placeholder:t?"Write a reply...":"Write a comment...",className:"w-full p-2 border border-gray-300 rounded resize-none focus:outline-none focus:border-blue-500",rows:"2"}),h.jsx("button",{type:"submit",disabled:a||!n.trim(),className:"mt-2 px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:opacity-50",children:a?"Posting...":t?"Reply":"Comment"})]})},js=({contentId:e})=>{const[t,r]=s.useState([]),[n,i]=s.useState(null),{user:a}=cs();s.useEffect((()=>{(async()=>{const{data:t}=await is.from("comments").select("*").eq("content_id",e).order("created_at",{ascending:!1});r(t||[])})()}),[e]);const o=e=>{r((t=>[e,...t])),i(null)},l=async e=>{if(window.confirm("Are you sure you want to delete this comment? This action cannot be undone."))try{const{error:t}=await is.from("comments").delete().eq("id",e).eq("user_id",a.id);if(t)throw t;const{error:n}=await is.from("comments").delete().eq("parent_id",e);if(n)throw n;r((t=>t.filter((t=>t.id!==e&&t.parent_id!==e))))}catch(t){alert("Failed to delete comment")}};return h.jsxs("div",{className:"px-2 pb-4",children:[h.jsx("div",{className:"mb-4",children:h.jsx(ks,{contentId:e,onCommentAdded:o})}),n&&h.jsxs("div",{className:"mb-4 pl-4 border-l-2 border-blue-500",children:[h.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Replying to ",h.jsx("span",{className:"text-blue-500 font-medium",children:n.user_name||n.user_email}),"'s comment:",h.jsxs("p",{className:"text-gray-600 italic mt-1",children:['"',n.text,'"']})]}),h.jsx(ks,{contentId:e,parentId:n.id,onCommentAdded:o}),h.jsx("button",{onClick:()=>i(null),className:"mt-2 text-sm text-gray-500 hover:text-gray-700",children:"Cancel Reply"})]}),h.jsx("div",{className:"space-y-3",children:t.map((e=>h.jsx(xs,{comment:e,comments:t,onReplyClick:i,onCommentDeleted:l},e.id)))})]})},Ss=s.memo((()=>{const[e,t]=s.useState({}),[r,n]=s.useState([]),[i,a]=s.useState(!0),[o,l]=s.useState(null),c=s.useCallback((async()=>{try{a(!0),l(null);const{data:e,error:r}=await is.from("contents").select("*").order("created_at",{ascending:!1});if(r)throw r;n(e||[]);const s=Object.fromEntries((e||[]).map((e=>[e.id,!1])));t(s)}catch(e){l(e.message||"Failed to fetch contents")}finally{a(!1)}}),[]);s.useEffect((()=>{c();const e=is.channel("public:contents").on("postgres_changes",{event:"*",schema:"public",table:"contents"},(()=>{c()})).subscribe();return()=>{e.unsubscribe()}}),[c]);const u=s.useCallback((e=>{t((t=>({...t,[e]:!t[e]})))}),[]);return i?h.jsx(Es,{}):o?h.jsx(Ts,{message:o}):h.jsx("main",{className:"app-main mirror-bg",children:r.map((t=>{var r;return h.jsxs("article",{className:"app-content",children:[h.jsxs("div",{className:"text-sm text-gray-500 px-2 pt-2",children:["Written by: ",null==(r=t.user_email)?void 0:r.split("@")[0]]}),h.jsxs("button",{className:"w-full flex flex-col md:flex-row items-center justify-between p-2",onClick:()=>u(t.id),"aria-expanded":e[t.id],"aria-controls":`content-${t.id}`,children:[h.jsx("h2",{className:"flex-1 text-left",children:t.title}),h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:e[t.id]?h.jsx(hs,{}):h.jsx(us,{})})]}),h.jsxs("div",{id:`content-${t.id}`,className:"transition-all duration-200 ease-in-out "+(e[t.id]?"max-h-[500px] opacity-100":"max-h-0 opacity-0"),children:[h.jsx("div",{className:"content-description",children:h.jsx("p",{className:"p-2",children:t.description})}),h.jsx("div",{className:"comments-section",children:h.jsx(js,{contentId:t.id})})]})]},t.id)}))})})),Es=()=>h.jsx("div",{className:"app-main mirror-bg",children:[1,2,3].map((e=>h.jsx("div",{className:"app-content animate-pulse",children:h.jsx("div",{className:"h-20 bg-gray-200 rounded w-full"})},e)))}),Ts=({message:e})=>h.jsx("div",{className:"app-main mirror-bg",children:h.jsxs("div",{className:"app-content bg-red-50 border-red-500",children:[h.jsxs("p",{className:"text-red-500 p-4",children:["Error: ",e]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mx-4 mb-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Retry"})]})}),Cs=()=>{const[e,t]=s.useState([]),[r,n]=s.useState(!0),[i,a]=s.useState(null),[o,l]=s.useState(null),[c,u]=s.useState({title:"",description:""}),[d,p]=s.useState([]),{user:f}=cs(),m="dana@admin.admin"===f.email,g=s.useCallback((async()=>{try{n(!0);let e=is.from("contents").select("*").order("created_at",{ascending:!1});m||(e=e.eq("user_id",f.id));const{data:r,error:s}=await e;if(s)throw s;t(r||[])}catch(e){a(e.message)}finally{n(!1)}}),[f.id,m]);s.useEffect((()=>{g()}),[g]);const v=e=>{const{name:t,value:r}=e.target;u((e=>({...e,[t]:r})))},y=()=>0===d.length?null:h.jsxs("button",{onClick:()=>(async e=>{if(window.confirm(`Are you sure you want to delete ${e.length} selected item(s)? This action cannot be undone.`))try{const{error:r}=await is.from("comments").delete().in("content_id",e);if(r)throw r;const{error:n}=await is.from("contents").delete().in("id",e);if(n)throw n;t((t=>t.filter((t=>!e.includes(t.id))))),p([])}catch(r){alert("Failed to delete contents: "+r.message)}})(d),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center gap-2",children:[h.jsx(ws,{}),"Delete Selected (",d.length,")"]});return r?h.jsx("div",{className:"admin-container",children:h.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})}):i?h.jsx("div",{className:"admin-container",children:h.jsxs("div",{className:"bg-red-50 border border-red-500 text-red-500 p-4 rounded-lg",children:["Error: ",i,h.jsx("button",{onClick:g,className:"ml-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Retry"})]})}):h.jsxs("div",{className:"admin-container",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"admin-title",children:"Content Management"}),h.jsx("div",{className:"flex gap-4",children:h.jsx(y,{})})]}),h.jsx("div",{className:"admin-select-header",children:h.jsxs("button",{onClick:()=>{d.length===e.length?p([]):p(e.map((e=>e.id)))},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[d.length===e.length?h.jsx(ds,{className:"text-blue-500"}):h.jsx(ys,{className:"text-gray-400"}),"Select All"]})}),h.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e,error:r}=await is.from("contents").insert([{title:c.title,description:c.description,user_id:f.id,user_email:f.email}]).select();if(r)throw r;t((t=>[e[0],...t])),u({title:"",description:""})}catch(r){a(r.message)}},className:"admin-form",children:[h.jsx("input",{type:"text",name:"title",value:c.title,onChange:v,placeholder:"Enter title",className:"admin-input"}),h.jsx("textarea",{name:"description",value:c.description,onChange:v,placeholder:"Enter description",className:"admin-input"}),h.jsxs("button",{type:"submit",className:"admin-button",children:[h.jsx(gs,{})," ",o?"Update":"Add"," Content"]})]}),h.jsx("div",{className:"admin-content-list",children:e.map((e=>h.jsx("div",{className:"admin-content-item",children:o===e.id?h.jsxs("div",{className:"admin-edit-form",children:[h.jsx("input",{type:"text",name:"title",value:c.title,onChange:v,className:"admin-input"}),h.jsx("textarea",{name:"description",value:c.description,onChange:v,className:"admin-input"}),h.jsx("button",{onClick:()=>(async e=>{try{if(!m){const{data:t}=await is.from("contents").select("user_id").eq("id",e).single();if(!t||t.user_id!==f.id)return void alert("You can only edit your own content")}const{error:r}=await is.from("contents").update({title:c.title,description:c.description}).eq("id",e);if(r)throw r;t((t=>t.map((t=>t.id===e?{...t,...c}:t)))),l(null),u({title:"",description:""})}catch(r){a(r.message)}})(e.id),className:"admin-button",children:"Save"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("button",{onClick:()=>{return t=e.id,void p((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mt-1",children:d.includes(e.id)?h.jsx(ds,{className:"text-blue-500"}):h.jsx(ys,{className:"text-gray-400"})}),h.jsxs("div",{className:"admin-content-text",children:[h.jsx("h3",{children:e.title}),h.jsx("p",{children:e.description}),h.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Shared by: ",e.user_email||"Unknown user"]})]})]}),h.jsxs("div",{className:"admin-content-actions",children:[h.jsx("button",{onClick:()=>(e=>{l(e.id),u({title:e.title,description:e.description})})(e),className:"admin-action-button edit",children:h.jsx(ps,{})}),h.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this item? This action cannot be undone."))try{const{error:r}=await is.from("comments").delete().eq("content_id",e);if(r)throw r;const{error:n}=await is.from("contents").delete().eq("id",e);if(n)throw n;t((t=>t.filter((t=>t.id!==e))))}catch(r){alert("Failed to delete content: "+r.message)}})(e.id),className:"admin-action-button delete",children:h.jsx(ws,{})})]})]})},e.id)))})]})},Ps=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"})),Os=()=>{const{user:e,signOut:t}=cs();return e?h.jsxs("div",{children:[h.jsx(_s,{children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:"text-sm text-white",children:e.email}),h.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:"Logout"})]})}),h.jsxs(_e,{children:[h.jsx(we,{path:"/",element:h.jsx(Ss,{})}),h.jsx(we,{path:"/admin",element:h.jsx(Cs,{})}),h.jsx(we,{path:"*",element:h.jsx(ye,{to:"/",replace:!0})})]})]}):h.jsx(bs,{onLogin:e=>{}})};s.lazy((()=>m((()=>import("./Display-B7SHzh65.js")),__vite__mapDeps([2,3,1,4,5])))),s.lazy((()=>m((()=>Promise.resolve().then((()=>Ps))),void 0)));const $s=()=>h.jsx("div",{className:"flex items-center justify-center h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}),Rs=()=>h.jsx(ze,{children:h.jsx(ls,{children:h.jsx(s.Suspense,{fallback:h.jsx($s,{}),children:h.jsx(Os,{})})})});class As extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?h.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[h.jsx("h1",{className:"text-2xl text-red-600 mb-4",children:"Something went wrong"}),h.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Reload Page"})]}):this.props.children}}p.createRoot(document.getElementById("root")).render(h.jsx(s.StrictMode,{children:h.jsx(As,{children:h.jsx(Rs,{})})}));export{_s as H,Ss as M,h as j};
